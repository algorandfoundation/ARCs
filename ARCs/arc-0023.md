---
arc: 23
title: Append the hash of the contract descriptor to the compiled application's bytes
status: Draft
---

# Append the hash of the contract descriptor to the compiled application bytes

## Summary

The following document introduces a convention for appending the hash of the contract descriptor (as described in [ARC-4](https://github.com/algorandfoundation/ARCs/blob/main/ARCs/arc-0004.md)) to the compiled application's bytes.

## Abstract

The goal of this convention is to standardize the process of verifying and interacting with smart contracts.

## Specification

The key words "**MUST**", "**MUST NOT**", "**REQUIRED**", "**SHALL**", "**SHALL NOT**", "**SHOULD**", "**SHOULD NOT**", "**RECOMMENDED**", "**MAY**", and "**OPTIONAL**" in this document are to be interpreted as described in [RFC-2119](https://www.ietf.org/rfc/rfc2119.txt).

> Comments like this are non-normative.

## Overview

By appending the hash of the contract descriptor, any user with access to the blockchain could easily verify the ABI of an application and interact with it.

> The goal is to have an off-chain ABI repository, where entries are indexed by the hash of the contract descriptor.

TEAL compilers are responsible for appending an ecnoded object contating the hash and some metadata.

### Hash

Any hash function can be used, but the default and **RECOMMENDED** is `SHA-512/256`.
The input to the hash function **MUST** be the canonical JSON object of the contract descriptor.

### Appending

The encoded object bytes are appended to the compiled application as a [bytecblock](https://developer.algorand.org/docs/get-details/dapps/avm/teal/opcodes/#bytecblock-bytes) containing 1 byte constant which is the encoded object.
> The reason to use `bytecblock` is that adding a `bytecblock` opcode at the end of a TEAL program does not change the semantics of the program, as long as: opcodes are properly aligned, there is no jump after the last position (that would make the program fails without `bytecblock`), and there is enough space left to add the opcode.
The size of the compiled application + the bytecblock should not exceed the maximum size of a compiled application according to the latest consensus parameters supported by the compiler.

### Encoding

The encoded object is a MessagePack encoding of the following object:
```JSON
{"arc23": <hash as a 32-byte array as defined above>}
```

## Copyright

Copyright and related rights waived via [CC0](https://creativecommons.org/publicdomain/zero/1.0/).
